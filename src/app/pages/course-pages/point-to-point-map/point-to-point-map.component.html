<div class="wrapper" *ngIf="station">
  <app-action-bar [name]="title" [showBack]="true"></app-action-bar>

  <div class="swipeable" [@swiping]="swipeState">
    <mgl-map
      [center]="mapOptions.center"
      [zoom]="mapOptions.zoom"
      [style]="mapOptions.style"
      [interactive]="true">
      <mgl-marker
        *ngFor="let st of course.stations"
        [lngLat]="[st.position.lon, st.position.lat]">
        <div [ngClass]="{'inactive-marker': st.id === station.id}">{{st.id + 1}}</div>
      </mgl-marker>
      <mgl-layer *ngFor="let line of course.courseline let i = index;" id="linelayerall{{i}}" type="line"
        [source]="{ 'type': 'geojson', 'data': { 'type': 'Feature', 'properties': {}, 'geometry': { 'type': 'LineString', 'coordinates': line }}}"
        [layout]="{ 'line-join': 'round', 'line-cap': 'round' }"
        [paint]="{ 'line-color': '#5500C3', 'line-width': 8 }">
      </mgl-layer>
      <mgl-layer *ngIf="line" id="linelayer" type="line"
        [source]="{ 'type': 'geojson', 'data': { 'type': 'Feature', 'properties': {}, 'geometry': { 'type': 'LineString', 'coordinates': line}}}"
        [layout]="{ 'line-join': 'round', 'line-cap': 'round' }"
        [paint]="{'line-color': '#a576f1', 'line-width': 8 }">
      </mgl-layer>
    </mgl-map>

    <div class="wrapper-box">
      <div class="box__container">
        <div class="box">
          <h1 class="box__title h1"
            [ngClass]="{relative: stationNameInline === true}">{{station.name}}</h1>
          <p [innerHTML]="course.description | safeHtml"></p>
          <a class="btn" id="next" routerLink="{{nextLink}}">Angekommen</a>
        </div>
      </div>
    </div>
    <div class="swipeable__helper"
      (click)="toggleSwipeState()"
      (touchmove)="toggleSwipeState()">
      <div class="swipeable__btn">click</div>
    </div>
  </div>

  <app-page-indicator [course]="course.id" [stations]="course.stations" [active]="station.id"></app-page-indicator>
</div>
